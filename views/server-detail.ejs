<%- include('partials/header') %>

<section class="page-header">
  <div class="container">
    <a href="/servers" class="back-link"><i data-lucide="arrow-left"></i> <span data-i18n="back_to_servers">Back to Servers</span></a>
    <h1 class="page-title"><%= server.name %></h1>
  </div>
</section>

<section class="section container">
  <div class="detail-card">
    <div class="detail-header">
      <div class="detail-status">
        <span class="status-dot status-dot-<%= server.status %>"></span>
        <span class="status-badge badge-<%= server.status %>" data-i18n="<%= server.status === 'online' ? 'online' : 'offline' %>">
          <%= server.status === 'online' ? 'Online' : 'Offline' %>
        </span>
      </div>
    </div>

    <div class="detail-grid">
      <div class="detail-item">
        <span class="detail-label" data-i18n="game">Game</span>
        <span class="detail-value"><%= server.game %></span>
      </div>
      <% if (user && user.role === 'admin') { %>
      <div class="detail-item">
        <span class="detail-label" data-i18n="server_address">Server Address</span>
        <span class="detail-value mono"><%= server.ip %>:<%= server.port %></span>
      </div>
      <% } %>
      <% if (server.show_player_count && server.status === 'online') { %>
        <div class="detail-item">
          <span class="detail-label" data-i18n="players_online">Players Online</span>
          <span class="detail-value"><%= server.player_count %> / <%= server.max_players %></span>
        </div>
      <% } %>
      <div class="detail-item">
        <span class="detail-label" data-i18n="last_checked">Last Checked</span>
        <span class="detail-value"><%= new Date(server.last_checked).toLocaleString() %></span>
      </div>
    </div>

    <% if (server.description) { %>
      <div class="detail-description">
        <h3 data-i18n="about_server">About this Server</h3>
        <p><%= server.description %></p>
      </div>
    <% } %>

    <div class="detail-actions">
      <% if (user && user.role === 'admin') { %>
      <button class="btn btn-primary" data-i18n="copy_address" onclick="copyToClipboard('<%= server.ip %>:<%= server.port %>')">
        Copy Address
      </button>
      <% } %>
      <% if (server.redirect_enabled && server.redirect_url) { %>
        <a href="<%= server.redirect_url %>" target="_blank" class="btn btn-accent" data-i18n="open_launcher">
          Open Launcher <i data-lucide="external-link"></i>
        </a>
      <% } %>
    </div>
  </div>
</section>

<script>
function copyToClipboard(text) {
  navigator.clipboard.writeText(text).then(() => {
    const btn = event.target;
    const original = btn.textContent;
    btn.textContent = window.i18n ? window.i18n.t('copied') : 'Copied!';
    setTimeout(() => { btn.textContent = window.i18n ? window.i18n.t('copy_address') : original; }, 2000);
  });
}
</script>

<%- include('partials/footer') %>
